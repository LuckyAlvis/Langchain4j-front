<!DOCTYPE html>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è€€è€€å·¥å‚ - ç³»ç»Ÿæ—¥å¿—</title>
    <link rel="stylesheet" href="permission-admin.css">
    <link rel="stylesheet" href="system-logs.css">
</head>
<body>
    <div class="app-container">
        <!-- ä¾§è¾¹æ  -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <img src="logo.png" alt="è€€è€€å·¥å‚" width="28" height="28">
                </div>
                <h2>è€€è€€å·¥å‚</h2>
            </div>
            <div class="sidebar-nav">
                <a href="dashboard.html" class="nav-item">
                    <i>ğŸ“Š</i>
                    <span>ç³»ç»Ÿæ¦‚è§ˆ</span>
                </a>
                <a href="permission-admin.html" class="nav-item">
                    <i>ğŸ”‘</i>
                    <span>æƒé™ç®¡ç†</span>
                </a>
                <a href="system-logs.html" class="nav-item active">
                    <i>ğŸ“</i>
                    <span>ç³»ç»Ÿæ—¥å¿—</span>
                </a>
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div class="main-content">
            <!-- é¡¶éƒ¨å¯¼èˆª -->
            <div class="top-nav">
                <div class="breadcrumb">
                    ç³»ç»Ÿæ—¥å¿—
                </div>
                <div class="user-profile">
                    <div class="user-info" onclick="toggleUserMenu()">
                        <div class="avatar">æˆ´</div>
                        <span class="username">ç®¡ç†å‘˜-æˆ´å€šå‡¡</span>
                        <i class="dropdown-icon">â–¼</i>
                    </div>
                    <div class="user-menu" id="userMenu">
                        <div class="menu-item" onclick="logout()">
                            <i class="menu-icon">â†©</i>
                            <span>é€€å‡ºç™»å½•</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ—¥å¿—ç­›é€‰ -->
            <div class="card filter-card">
                <div class="card-body">
                    <div class="filter-area">
                        <div class="filter-item">
                            <label>æ“ä½œç±»å‹:</label>
                            <select>
                                <option value="">å…¨éƒ¨</option>
                                <option value="approve">å®¡æ‰¹é€šè¿‡</option>
                                <option value="reject">å®¡æ‰¹æ‹’ç»</option>
                                <option value="login">ç™»å½•ç³»ç»Ÿ</option>
                                <option value="new">æƒé™ç”³è¯·</option>
                                <option value="revoke">æƒé™æ”¶å›</option>
                            </select>
                        </div>
                        <div class="filter-item">
                            <label>æ“ä½œäºº:</label>
                            <input type="text" placeholder="è¯·è¾“å…¥æ“ä½œäººå§“å">
                        </div>
                        <div class="filter-item">
                            <label>æ—¶é—´èŒƒå›´:</label>
                            <input type="date" class="date-picker">
                            <span class="date-separator">è‡³</span>
                            <input type="date" class="date-picker">
                        </div>
                        <div class="filter-item">
                            <button class="search-btn">æœç´¢</button>
                            <button class="reset-btn">é‡ç½®</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ—¥å¿—åˆ—è¡¨ -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">æ“ä½œæ—¥å¿—</h3>
                </div>
                <div class="card-body">
                    <div class="logs-list">
                        <div class="log-item">
                            <div class="log-icon approved">âœ“</div>
                            <div class="log-content">
                                <div class="log-text">
                                    <div class="log-title">å®¡æ‰¹é€šè¿‡ - å¼ ä¸‰</div>
                                    <div class="log-meta">
                                        <span class="log-time">10åˆ†é’Ÿå‰</span>
                                        <span class="log-operator">æˆ´å€šå‡¡</span>
                                    </div>
                                </div>
                                <div class="log-detail">
                                    <button class="view-detail-btn">æŸ¥çœ‹è¯¦æƒ…</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="log-item">
                            <div class="log-icon login">â†’</div>
                            <div class="log-content">
                                <div class="log-text">
                                    <div class="log-title">ç³»ç»Ÿç™»å½• - æå››</div>
                                    <div class="log-meta">
                                        <span class="log-time">30åˆ†é’Ÿå‰</span>
                                    </div>
                                </div>
                                <div class="log-detail">
                                    <button class="view-detail-btn">æŸ¥çœ‹è¯¦æƒ…</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="log-item">
                            <div class="log-icon rejected">âœ—</div>
                            <div class="log-content">
                                <div class="log-text">
                                    <div class="log-title">å®¡æ‰¹æ‹’ç» - ç‹äº”</div>
                                    <div class="log-meta">
                                        <span class="log-time">1å°æ—¶å‰</span>
                                        <span class="log-operator">æˆ´å€šå‡¡</span>
                                    </div>
                                </div>
                                <div class="log-detail">
                                    <button class="view-detail-btn">æŸ¥çœ‹è¯¦æƒ…</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="log-item">
                            <div class="log-icon new">+</div>
                            <div class="log-content">
                                <div class="log-text">
                                    <div class="log-title">æƒé™ç”³è¯· - èµµå…­</div>
                                    <div class="log-meta">
                                        <span class="log-time">3å°æ—¶å‰</span>
                                    </div>
                                </div>
                                <div class="log-detail">
                                    <button class="view-detail-btn">æŸ¥çœ‹è¯¦æƒ…</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="log-item">
                            <div class="log-icon revoked">-</div>
                            <div class="log-content">
                                <div class="log-text">
                                    <div class="log-title">æƒé™æ”¶å› - å­™ä¸ƒ</div>
                                    <div class="log-meta">
                                        <span class="log-time">æ˜¨å¤© 15:30</span>
                                    </div>
                                </div>
                                <div class="log-detail">
                                    <button class="view-detail-btn">æŸ¥çœ‹è¯¦æƒ…</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="log-item">
                            <div class="log-icon login">â†’</div>
                            <div class="log-content">
                                <div class="log-text">
                                    <div class="log-title">ç³»ç»Ÿç™»å½• - å‘¨å…«</div>
                                    <div class="log-meta">
                                        <span class="log-time">æ˜¨å¤© 14:45</span>
                                    </div>
                                </div>
                                <div class="log-detail">
                                    <button class="view-detail-btn">æŸ¥çœ‹è¯¦æƒ…</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="log-item">
                            <div class="log-icon approved">âœ“</div>
                            <div class="log-content">
                                <div class="log-text">
                                    <div class="log-title">å®¡æ‰¹é€šè¿‡ - å´ä¹</div>
                                    <div class="log-meta">
                                        <span class="log-time">æ˜¨å¤© 10:20</span>
                                        <span class="log-operator">æ—èˆ’æ‚¦</span>
                                    </div>
                                </div>
                                <div class="log-detail">
                                    <button class="view-detail-btn">æŸ¥çœ‹è¯¦æƒ…</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="log-item">
                            <div class="log-icon new">+</div>
                            <div class="log-content">
                                <div class="log-text">
                                    <div class="log-title">æƒé™ç”³è¯· - éƒ‘å</div>
                                    <div class="log-meta">
                                        <span class="log-time">å‰å¤© 16:50</span>
                                    </div>
                                </div>
                                <div class="log-detail">
                                    <button class="view-detail-btn">æŸ¥çœ‹è¯¦æƒ…</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- åˆ†é¡µ -->
                    <div class="pagination">
                        <button disabled>&lt;</button>
                        <button class="active">1</button>
                        <button>2</button>
                        <button>3</button>
                        <button>&gt;</button>
                    </div>
                </div>
            </div>
            
            <!-- æ—¥å¿—è¯¦æƒ…æ¨¡æ€æ¡† -->
            <div id="log-detail-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>æ“ä½œè¯¦æƒ…</h3>
                        <span class="close-btn">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="detail-section">
                            <h4>ç”¨æˆ·ä¿¡æ¯</h4>
                            <div class="detail-grid">
                                <div class="detail-item">
                                    <div class="detail-label">ç”¨æˆ·å</div>
                                    <div class="detail-value">å¼ ä¸‰</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">å·¥å·</div>
                                    <div class="detail-value">ZH001</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">æ‰€å±éƒ¨é—¨</div>
                                    <div class="detail-value">æŠ€æœ¯éƒ¨</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">æ‰€å±å²—ä½</div>
                                    <div class="detail-value">é«˜çº§å¼€å‘å·¥ç¨‹å¸ˆ</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">é‚®ç®±</div>
                                    <div class="detail-value">zhangsan@example.com</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h4>æƒé™ä¿¡æ¯</h4>
                            <div class="detail-grid">
                                <div class="detail-item">
                                    <div class="detail-label">ç”³è¯·æ—¶é•¿</div>
                                    <div class="detail-value">30å¤©</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">ç”³è¯·æ—¶é—´</div>
                                    <div class="detail-value">2023-10-26 10:20:35</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h4>ç”³è¯·åŸå› </h4>
                            <div class="detail-remarks">
                                å› å·¥ä½œéœ€è¦ï¼Œéœ€è¦è®¿é—®ä¸­æµ·é€šç³»ç»ŸæŸ¥è¯¢å®¢æˆ·è®¢å•æ•°æ®ï¼Œä»¥ä¾¿è¿›è¡ŒæŠ€æœ¯æ”¯æŒå’Œé—®é¢˜æ’æŸ¥ã€‚ç³»ç»Ÿä¸­çš„ç”¨æˆ·æ—¥å¿—å’Œè®¢å•æµç¨‹æ•°æ®å¯¹è§£å†³å®¢æˆ·åé¦ˆçš„é—®é¢˜è‡³å…³é‡è¦ã€‚
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h4>å®¡æ‰¹å¤‡æ³¨</h4>
                            <div class="detail-remarks">
                                å·²æ ¸å®ç”¨æˆ·èº«ä»½å’Œéœ€æ±‚ï¼Œç¬¦åˆå…¬å¸å®‰å…¨æ”¿ç­–è¦æ±‚ï¼Œäºˆä»¥æ‰¹å‡†ã€‚æƒé™æœ‰æ•ˆæœŸ30å¤©ï¼Œåˆ°æœŸåè‡ªåŠ¨æ”¶å›ã€‚
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="modal-btn cancel-btn">å…³é—­</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ€æ¡†åŠŸèƒ½
        const modal = document.getElementById('log-detail-modal');
        const detailButtons = document.querySelectorAll('.view-detail-btn');
        const closeBtn = document.querySelector('.close-btn');
        const cancelBtn = document.querySelector('.modal-btn.cancel-btn');
        
        // ä¸ºæ‰€æœ‰æŸ¥çœ‹è¯¦æƒ…æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶
        detailButtons.forEach(button => {
            button.addEventListener('click', function() {
                // è·å–æ—¥å¿—ç±»å‹
                const logItem = this.closest('.log-item');
                const logIcon = logItem.querySelector('.log-icon');
                const logTitle = logItem.querySelector('.log-title').textContent;
                
                // æ ¹æ®ç±»å‹è®¾ç½®ä¸åŒçš„æ¨¡æ€æ¡†å†…å®¹
                updateModalContent(logIcon.className, logTitle);
                
                // æ˜¾ç¤ºæ¨¡æ€æ¡†
                modal.style.display = 'flex';
            });
        });
        
        // æ ¹æ®æ—¥å¿—ç±»å‹æ›´æ–°æ¨¡æ€æ¡†å†…å®¹
        function updateModalContent(iconClass, title) {
            // è®¾ç½®æ¨¡æ€æ¡†æ ‡é¢˜
            document.querySelector('.modal-header h3').textContent = title.includes('-') ? 
                title.split('-')[0].trim() + 'è¯¦æƒ…' : 'æ“ä½œè¯¦æƒ…';
            
            // è·å–æ¨¡æ€æ¡†å†…å®¹åŒºåŸŸ
            const modalBody = document.querySelector('.modal-body');
            
            // è·å–ç”³è¯·äººåç§°
            let userName = '';
            if (title.includes('-')) {
                userName = title.split('-')[1].trim();
            } else if (title.includes('çš„')) {
                userName = title.split('çš„')[0].trim();
            }
            
            // æ·»åŠ ç”³è¯·æ—¶é•¿ä¿¡æ¯
            let duration = '30å¤©'; // é»˜è®¤30å¤©
            
            // æ ¹æ®ç”¨æˆ·åè®¾ç½®ä¸åŒçš„ç”³è¯·æ—¶é•¿
            if (userName.includes('æå››')) {
                duration = '7å¤©';
            } else if (userName.includes('ç‹äº”')) {
                duration = '90å¤©';
            } else if (userName.includes('èµµå…­')) {
                duration = 'é•¿æœŸ';
            } else if (userName.includes('å­™ä¸ƒ')) {
                duration = '1å¹´';
            }
            
            // è®¾ç½®å„ç§å®¡æ‰¹æ—¶é—´
            const applyTime = '2023-10-26 10:20:35';
            const approvalTime = '2023-10-26 15:45:12'; // å®¡æ‰¹é€šè¿‡æ—¶é—´
            const rejectionTime = '2023-10-26 14:30:08'; // æ‹’ç»æ—¶é—´
            
            // æ ¹æ®ç”¨æˆ·åè®¾ç½®ç›¸å…³ä¿¡æ¯
            let jobId = 'ZH001';
            let department = 'æŠ€æœ¯éƒ¨';
            let position = 'é«˜çº§å¼€å‘å·¥ç¨‹å¸ˆ';
            let email = 'zhangsan@example.com';
            
            if (userName.includes('æå››')) {
                jobId = 'ZH002';
                department = 'å¸‚åœºéƒ¨';
                position = 'å¸‚åœºä¸“å‘˜';
                email = 'lisi@example.com';
            } else if (userName.includes('ç‹äº”')) {
                jobId = 'ZH003';
                department = 'äº§å“éƒ¨';
                position = 'äº§å“ç»ç†';
                email = 'wangwu@example.com';
            } else if (userName.includes('èµµå…­')) {
                jobId = 'ZH004';
                department = 'äººåŠ›èµ„æº';
                position = 'HRä¸“å‘˜';
                email = 'zhaoliu@example.com';
            } else if (userName.includes('é’±ä¸ƒ') || userName.includes('å­™ä¸ƒ')) {
                jobId = 'ZH005';
                department = 'æŠ€æœ¯éƒ¨';
                position = 'å¼€å‘å·¥ç¨‹å¸ˆ';
                email = 'qianqi@example.com';
            }
            
            // åˆ›å»ºHTMLå†…å®¹
            let modalContent = '';
            
            // ç¬¬ä¸€éƒ¨åˆ†ï¼šç”¨æˆ·ä¿¡æ¯ï¼ˆæ‰€æœ‰æ“ä½œç±»å‹éƒ½æ˜¾ç¤ºï¼‰
            modalContent += `
                <div class="detail-section">
                    <h4>ç”¨æˆ·ä¿¡æ¯</h4>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <div class="detail-label">ç”¨æˆ·å</div>
                            <div class="detail-value">${userName}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">å·¥å·</div>
                            <div class="detail-value">${jobId}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">æ‰€å±éƒ¨é—¨</div>
                            <div class="detail-value">${department}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">æ‰€å±å²—ä½</div>
                            <div class="detail-value">${position}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">é‚®ç®±</div>
                            <div class="detail-value">${email}</div>
                        </div>
                    </div>
                </div>
            `;
            
            // ç¬¬äºŒéƒ¨åˆ†ï¼šæƒé™ä¿¡æ¯ï¼ˆæ ¹æ®æ“ä½œç±»å‹æ˜¾ç¤ºä¸åŒå†…å®¹ï¼‰
            if (iconClass.includes('login')) {
                // ç™»å½•æ“ä½œ - æ˜¾ç¤ºç™»å½•ä¿¡æ¯
                modalContent += `
                    <div class="detail-section">
                        <h4>ç™»å½•ä¿¡æ¯</h4>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">ç™»å½•æ—¶é—´</div>
                                <div class="detail-value">${applyTime}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">ç™»å½•IP</div>
                                <div class="detail-value">192.168.1.101</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">è®¾å¤‡ä¿¡æ¯</div>
                                <div class="detail-value">Windows 10, Chrome</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">ç™»å½•ä½ç½®</div>
                                <div class="detail-value">å…¬å¸å†…ç½‘</div>
                            </div>
                        </div>
                        <div class="detail-remarks" style="border-left-color: #1890ff; background-color: #e6f7ff;">
                            ç™»å½•æˆåŠŸã€‚è®¾å¤‡ä¿¡æ¯ï¼šWindows 10ï¼ŒChrome æµè§ˆå™¨ã€‚ç™»å½•ä½ç½®ï¼šå…¬å¸å†…ç½‘ï¼ŒIPåœ°å€åŒ¹é…å¸¸ç”¨ä½ç½®ã€‚
                        </div>
                    </div>
                `;
            } 
            else if (iconClass.includes('approved') || iconClass.includes('rejected') || iconClass.includes('new')) {
                // å®¡æ‰¹é€šè¿‡/å®¡æ‰¹æ‹’ç»/æ–°ç”³è¯· - æ˜¾ç¤ºæƒé™ç”³è¯·ä¿¡æ¯
                modalContent += `
                    <div class="detail-section">
                        <h4>æƒé™ä¿¡æ¯</h4>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">ç”³è¯·æ—¶é•¿</div>
                                <div class="detail-value">${duration}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">ç”³è¯·æ—¶é—´</div>
                                <div class="detail-value">${applyTime}</div>
                            </div>
                            ${iconClass.includes('approved') ? `
                            <div class="detail-item">
                                <div class="detail-label">é€šè¿‡æ—¶é—´</div>
                                <div class="detail-value">${approvalTime}</div>
                            </div>
                            ` : ''}
                            ${iconClass.includes('rejected') ? `
                            <div class="detail-item">
                                <div class="detail-label">æ‹’ç»æ—¶é—´</div>
                                <div class="detail-value">${rejectionTime}</div>
                            </div>
                            ` : ''}
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <h4>ç”³è¯·åŸå› </h4>
                        <div class="detail-remarks" style="border-left-color: #faad14; background-color: #fffbe6;">
                            å› å·¥ä½œéœ€è¦ï¼Œéœ€è¦è®¿é—®ä¸­æµ·é€šç³»ç»ŸæŸ¥è¯¢å®¢æˆ·è®¢å•æ•°æ®ï¼Œä»¥ä¾¿è¿›è¡ŒæŠ€æœ¯æ”¯æŒå’Œé—®é¢˜æ’æŸ¥ã€‚ç³»ç»Ÿä¸­çš„ç”¨æˆ·æ—¥å¿—å’Œè®¢å•æµç¨‹æ•°æ®å¯¹è§£å†³å®¢æˆ·åé¦ˆçš„é—®é¢˜è‡³å…³é‡è¦ã€‚
                        </div>
                    </div>
                `;
                
                // ä¸ºå®¡æ‰¹é€šè¿‡å’Œå®¡æ‰¹æ‹’ç»æ·»åŠ å¤‡æ³¨/ç†ç”±
                if (iconClass.includes('approved')) {
                    modalContent += `
                        <div class="detail-section">
                            <h4>å®¡æ‰¹å¤‡æ³¨</h4>
                            <div class="detail-remarks" style="border-left-color: #52c41a; background-color: #f6ffed;">
                                å·²æ ¸å®ç”¨æˆ·èº«ä»½å’Œéœ€æ±‚ï¼Œç¬¦åˆå…¬å¸å®‰å…¨æ”¿ç­–è¦æ±‚ï¼Œäºˆä»¥æ‰¹å‡†ã€‚æƒé™æœ‰æ•ˆæœŸ${duration}ï¼Œåˆ°æœŸåè‡ªåŠ¨æ”¶å›ã€‚
                            </div>
                        </div>
                    `;
                } else if (iconClass.includes('rejected')) {
                    modalContent += `
                        <div class="detail-section">
                            <h4>æ‹’ç»ç†ç”±</h4>
                            <div class="detail-remarks" style="border-left-color: #f5222d; background-color: #fff1f0;">
                                ç”³è¯·ç”¨é€”ä¸ç”¨æˆ·å²—ä½èŒè´£ä¸ç¬¦ï¼Œæ— æ³•ç¡®è®¤ä¸šåŠ¡éœ€æ±‚çš„çœŸå®æ€§ã€‚å»ºè®®ç”±éƒ¨é—¨ä¸»ç®¡é‡æ–°æäº¤ç”³è¯·å¹¶è¯¦ç»†è¯´æ˜ä¸šåŠ¡éœ€æ±‚ã€‚
                            </div>
                        </div>
                    `;
                } else if (iconClass.includes('new')) {
                    modalContent += `
                        <div class="detail-section">
                            <h4>ç”³è¯·çŠ¶æ€</h4>
                            <div class="detail-remarks" style="border-left-color: #faad14; background-color: #fffbe6;">
                                ç”³è¯·å·²æäº¤ï¼Œç­‰å¾…ç®¡ç†å‘˜å®¡æ‰¹ã€‚é¢„è®¡å¤„ç†æ—¶é—´ï¼š24å°æ—¶å†…ã€‚
                            </div>
                        </div>
                    `;
                }
            }
            else if (iconClass.includes('revoked')) {
                // æƒé™æ”¶å› - æ˜¾ç¤ºæ“ä½œä¿¡æ¯ï¼Œä½†ä¸åŒ…æ‹¬æ“ä½œäºº
                modalContent += `
                    <div class="detail-section">
                        <h4>æƒé™ä¿¡æ¯</h4>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">æƒé™æ—¶é•¿</div>
                                <div class="detail-value">${duration}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">æˆæƒæ—¶é—´</div>
                                <div class="detail-value">2023-09-16 09:12</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">æ”¶å›æ—¶é—´</div>
                                <div class="detail-value">${applyTime}</div>
                            </div>
                        </div>
                        <div class="detail-section">
                            <h4>æ“ä½œå¤‡æ³¨</h4>
                            <div class="detail-remarks" style="border-left-color: #bfbfbf; background-color: #fafafa;">
                                æ ¹æ®å…¬å¸æƒé™ç®¡ç†è§„å®šï¼Œç”¨æˆ·${duration}æƒé™æœ‰æ•ˆæœŸå·²åˆ°ï¼Œç³»ç»Ÿè‡ªåŠ¨æ”¶å›ã€‚ç”¨æˆ·å¯é‡æ–°ç”³è¯·ã€‚
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // æ›´æ–°æ¨¡æ€æ¡†å†…å®¹
            modalBody.innerHTML = modalContent;
        }
        
        // è¾…åŠ©å‡½æ•°ï¼šæ ¹æ®å›¾æ ‡ç±»è·å–çŠ¶æ€æ–‡æœ¬
        function getStatusText(iconClass) {
            if (iconClass.includes('approved')) {
                return 'å·²é€šè¿‡';
            } else if (iconClass.includes('rejected')) {
                return 'å·²æ‹’ç»';
            } else if (iconClass.includes('new')) {
                return 'å¾…å®¡æ‰¹';
            } else if (iconClass.includes('revoked')) {
                return 'å·²æ”¶å›';
            } else if (iconClass.includes('login')) {
                return 'ç™»å½•æˆåŠŸ';
            }
            return '';
        }
        
        // å…³é—­æ¨¡æ€æ¡†çš„äº‹ä»¶å¤„ç†
        closeBtn.addEventListener('click', () => {
            modal.style.display = 'none';
        });
        
        cancelBtn.addEventListener('click', () => {
            modal.style.display = 'none';
        });
        
        window.addEventListener('click', (event) => {
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });
        
        // ç”¨æˆ·èœå•åŠŸèƒ½
        function toggleUserMenu() {
            const menu = document.getElementById('userMenu');
            if (menu.style.display === 'block') {
                menu.style.display = 'none';
            } else {
                menu.style.display = 'block';
            }
        }
        
        document.addEventListener('click', (event) => {
            const userInfo = document.querySelector('.user-info');
            const userMenu = document.getElementById('userMenu');
            
            if (userInfo && userMenu && !userInfo.contains(event.target) && userMenu.style.display === 'block') {
                userMenu.style.display = 'none';
            }
        }, true);
        
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                window.location.href = 'login.html';
            }
        }

        // ä¿®æ”¹ç³»ç»Ÿæ—¥å¿—é¡µé¢ä¸­çš„æ“ä½œæ–‡æœ¬æè¿°
        document.addEventListener('DOMContentLoaded', function() {
            // è·å–æ‰€æœ‰æ—¥å¿—é¡¹
            const logItems = document.querySelectorAll('.log-item');
            logItems.forEach(item => {
                const titleElement = item.querySelector('.log-title');
                if (titleElement) {
                    // å°†"é€šè¿‡ä¸­æµ·é€šç™»å½•ç³»ç»Ÿ"æ”¹ä¸º"ç³»ç»Ÿç™»å½•"
                    if (titleElement.textContent.includes('é€šè¿‡ä¸­æµ·é€šç™»å½•ç³»ç»Ÿ')) {
                        titleElement.textContent = titleElement.textContent.replace('é€šè¿‡ä¸­æµ·é€šç™»å½•ç³»ç»Ÿ', 'ç³»ç»Ÿç™»å½•');
                    }
                    
                    // å°†"æ–°çš„è®¿é—®æƒé™ç”³è¯·"æ”¹ä¸º"æƒé™ç”³è¯·"
                    if (titleElement.textContent.includes('æ–°çš„è®¿é—®æƒé™ç”³è¯·')) {
                        titleElement.textContent = titleElement.textContent.replace('æ–°çš„è®¿é—®æƒé™ç”³è¯·', 'æƒé™ç”³è¯·');
                    }
                }
            });
        });
    </script>
</body>
</html> 