<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è€€è€€å·¥å‚ - ç³»ç»Ÿæ¦‚è§ˆ</title>
    <link rel="stylesheet" href="permission-admin.css">
    <link rel="stylesheet" href="dashboard.css">
    <!-- å¼•å…¥ ECharts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.2/dist/echarts.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- ä¾§è¾¹æ  -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <img src="logo.png" alt="è€€è€€å·¥å‚">
                </div>
                <h2>è€€è€€å·¥å‚</h2>
            </div>
            <div class="sidebar-nav">
                <a href="dashboard.html" class="nav-item active">
                    <i>ğŸ“Š</i>
                    <span>ç³»ç»Ÿæ¦‚è§ˆ</span>
                </a>
                <a href="permission-admin.html" class="nav-item">
                    <i>ğŸ”‘</i>
                    <span>æƒé™ç®¡ç†</span>
                </a>
                <a href="system-logs.html" class="nav-item">
                    <i>ğŸ“</i>
                    <span>ç³»ç»Ÿæ—¥å¿—</span>
                </a>
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div class="main-content">
            <!-- é¡¶éƒ¨å¯¼èˆª -->
            <div class="top-nav">
                <div class="breadcrumb">
                    ç³»ç»Ÿæ¦‚è§ˆ
                </div>
                <div class="user-profile">
                    <div class="user-info" onclick="toggleUserMenu()">
                        <div class="avatar">æˆ´</div>
                        <span class="username">ç®¡ç†å‘˜-æˆ´å€šå‡¡</span>
                        <i class="dropdown-icon">â–¼</i>
                    </div>
                    <div class="user-menu" id="userMenu">
                        <div class="menu-item" onclick="logout()">
                            <i class="menu-icon">â†©</i>
                            <span>é€€å‡ºç™»å½•</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ•°æ®çœ‹æ¿ -->
            <div class="dashboard-stats">
                <div class="stat-card">
                    <div class="stat-icon online-users-icon">ğŸ‘¥</div>
                    <div class="stat-content">
                        <div class="stat-value">42</div>
                        <div class="stat-label">å½“å‰åœ¨çº¿ç”¨æˆ·</div>
                    </div>
                    <div class="stat-trend up">12% è¾ƒä¸Šå‘¨</div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon daily-visits-icon">ğŸ“ˆ</div>
                    <div class="stat-content">
                        <div class="stat-value">256</div>
                        <div class="stat-label">ä»Šæ—¥è®¿é—®äººæ¬¡</div>
                    </div>
                    <div class="stat-trend up">8% è¾ƒæ˜¨æ—¥</div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon pending-approvals-icon">â³</div>
                    <div class="stat-content">
                        <div class="stat-value">15</div>
                        <div class="stat-label">å¾…å®¡æ‰¹ç”³è¯·</div>
                    </div>
                    <div class="stat-trend down">5% è¾ƒä¸Šå‘¨</div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon authorized-users-icon">âœ…</div>
                    <div class="stat-content">
                        <div class="stat-value">328</div>
                        <div class="stat-label">å·²æˆæƒç”¨æˆ·</div>
                    </div>
                    <div class="stat-trend up">3% è¾ƒä¸Šæœˆ</div>
                </div>
            </div>

            <!-- åœ¨ç»Ÿè®¡å¡ç‰‡ä¸‹æ–¹æ·»åŠ å›¾è¡¨åŒºåŸŸï¼ŒåŒ…å«éƒ¨é—¨åˆ†å¸ƒå’Œå²—ä½åˆ†å¸ƒä¸¤ä¸ªé¥¼å›¾ -->
            <div class="chart-row">
                <!-- å²—ä½åˆ†å¸ƒé¥¼å›¾ -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">å²—ä½åˆ†å¸ƒ</h3>
                    </div>
                    <div class="card-body">
                        <div id="jobDistributionChart" class="chart-container"></div>
                    </div>
                </div>

                <!-- éƒ¨é—¨åˆ†å¸ƒé¥¼å›¾ -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">éƒ¨é—¨åˆ†å¸ƒ</h3>
                    </div>
                    <div class="card-body">
                        <div id="userDistributionChart" class="chart-container"></div>
                    </div>
                </div>
            </div>

            <!-- æœ€è¿‘æ´»åŠ¨
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">æœ€è¿‘æ´»åŠ¨</h3>
                </div>
                <div class="card-body">
                    <div class="activity-list">
                        <div class="activity-item">
                            <div class="activity-icon approved">âœ“</div>
                            <div class="activity-content">
                                <div class="activity-text">
                                    <div class="activity-title">å®¡æ‰¹é€šè¿‡ - å¼ ä¸‰</div>
                                    <div class="activity-meta">
                                        <span class="activity-time">10åˆ†é’Ÿå‰</span>
                                        <span class="activity-user">æˆ´å€šå‡¡</span>
                                    </div>
                                </div>
                                <div class="activity-detail">
                                    <button class="view-detail-btn">æŸ¥çœ‹è¯¦æƒ…</button>
                                </div>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon login">â†’</div>
                            <div class="activity-content">
                                <div class="activity-text">
                                    <div class="activity-title">ç³»ç»Ÿç™»å½• - æå››</div>
                                    <div class="activity-meta">
                                        <span class="activity-time">30åˆ†é’Ÿå‰</span>
                                    </div>
                                </div>
                                <div class="activity-detail">
                                    <button class="view-detail-btn">æŸ¥çœ‹è¯¦æƒ…</button>
                                </div>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon rejected">âœ—</div>
                            <div class="activity-content">
                                <div class="activity-text">
                                    <div class="activity-title">å®¡æ‰¹æ‹’ç» - ç‹äº”</div>
                                    <div class="activity-meta">
                                        <span class="activity-time">1å°æ—¶å‰</span>
                                        <span class="activity-user">æˆ´å€šå‡¡</span>
                                    </div>
                                </div>
                                <div class="activity-detail">
                                    <button class="view-detail-btn">æŸ¥çœ‹è¯¦æƒ…</button>
                                </div>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon new">+</div>
                            <div class="activity-content">
                                <div class="activity-text">
                                    <div class="activity-title">æƒé™ç”³è¯· - èµµå…­</div>
                                    <div class="activity-meta">
                                        <span class="activity-time">3å°æ—¶å‰</span>
                                    </div>
                                </div>
                            </div>
                            <div class="activity-detail">
                                <button class="view-detail-btn">æŸ¥çœ‹è¯¦æƒ…</button>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon revoked">-</div>
                            <div class="activity-content">
                                <div class="activity-text">
                                    <div class="activity-title">æƒé™æ”¶å› - å­™ä¸ƒ</div>
                                    <div class="activity-meta">
                                        <span class="activity-time">æ˜¨å¤© 15:30</span>
                                    </div>
                                </div>
                            </div>
                            <div class="activity-detail">
                                <button class="view-detail-btn">æŸ¥çœ‹è¯¦æƒ…</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->
        </div>
    </div>

    <!-- åœ¨dashboard.htmlåº•éƒ¨æ·»åŠ çš„æ¨¡æ€æ¡†ï¼Œä¸system-logs.htmlä¸­ç›¸åŒ -->
    <div id="activity-detail-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æ“ä½œè¯¦æƒ…</h3>
                <span class="close-btn">&times;</span>
            </div>
            <div class="modal-body">
                <div class="detail-section">
                    <h4>åŸºæœ¬ä¿¡æ¯</h4>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <div class="detail-label">æ“ä½œç±»å‹</div>
                            <div class="detail-value">å®¡æ‰¹é€šè¿‡</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">æ“ä½œæ—¶é—´</div>
                            <div class="detail-value">2023-10-26 14:35:22</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">æ“ä½œäºº</div>
                            <div class="detail-value">æˆ´å€šå‡¡ï¼ˆç®¡ç†å‘˜ï¼‰</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">IPåœ°å€</div>
                            <div class="detail-value">192.168.1.102</div>
                        </div>
                    </div>
                </div>
                
                <div class="detail-section">
                    <h4>ç”³è¯·ä¿¡æ¯</h4>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <div class="detail-label">ç”³è¯·äºº</div>
                            <div class="detail-value">å¼ ä¸‰</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">æ‰€å±éƒ¨é—¨</div>
                            <div class="detail-value">æŠ€æœ¯éƒ¨</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">å·¥å·</div>
                            <div class="detail-value">ZH001</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">å²—ä½åç§°</div>
                            <div class="detail-value">é«˜çº§å¼€å‘å·¥ç¨‹å¸ˆ</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">é‚®ç®±</div>
                            <div class="detail-value">zhangsan@example.com</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ç”³è¯·æƒé™</div>
                            <div class="detail-value">è€€è€€å·¥å‚ç™»å½•æƒé™</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ç”³è¯·æ—¶é—´</div>
                            <div class="detail-value">2023-10-26 10:20:35</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ç”³è¯·æ—¶é•¿</div>
                            <div class="detail-value">30å¤©</div>
                        </div>
                    </div>
                </div>
                
                <div class="detail-section">
                    <h4>ç”³è¯·åŸå› </h4>
                    <div class="detail-remarks">
                        å› å·¥ä½œéœ€è¦ï¼Œéœ€è¦è®¿é—®ä¸­æµ·é€šç³»ç»ŸæŸ¥è¯¢å®¢æˆ·è®¢å•æ•°æ®ï¼Œä»¥ä¾¿è¿›è¡ŒæŠ€æœ¯æ”¯æŒå’Œé—®é¢˜æ’æŸ¥ã€‚ç³»ç»Ÿä¸­çš„ç”¨æˆ·æ—¥å¿—å’Œè®¢å•æµç¨‹æ•°æ®å¯¹è§£å†³å®¢æˆ·åé¦ˆçš„é—®é¢˜è‡³å…³é‡è¦ã€‚
                    </div>
                </div>
                
                <div class="detail-section">
                    <h4>æ“ä½œå¤‡æ³¨</h4>
                    <div class="detail-remarks">
                        å·²æ ¸å®ç”¨æˆ·èº«ä»½å’Œéœ€æ±‚ï¼Œç¬¦åˆå…¬å¸å®‰å…¨æ”¿ç­–è¦æ±‚ï¼Œäºˆä»¥æ‰¹å‡†ã€‚æƒé™æœ‰æ•ˆæœŸ30å¤©ï¼Œåˆ°æœŸåè‡ªåŠ¨æ”¶å›ã€‚
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel-btn">å…³é—­</button>
            </div>
        </div>
    </div>

    <script>
        // ä¿®å¤ç³»ç»Ÿæ¦‚è§ˆé¡µé¢çš„é—®é¢˜
        document.addEventListener('DOMContentLoaded', function() {
            // ... existing code ...
            
            // ä¿®å¤é‡å¤æ´»åŠ¨é¡¹çš„é—®é¢˜
            const activityItems = document.querySelectorAll('.activity-item');
            activityItems.forEach(item => {
                const titleElement = item.querySelector('.activity-title');
                if (titleElement) {
                    // å°†"ç³»ç»Ÿç™»å½•"æ”¹ä¸º"ç™»å½•ç³»ç»Ÿ"
                    if (titleElement.textContent.includes('ç³»ç»Ÿç™»å½•')) {
                        titleElement.textContent = titleElement.textContent.replace('ç³»ç»Ÿç™»å½•', 'ç™»å½•ç³»ç»Ÿ');
                    }
                    
                    // å°†"æ”¶å›æƒé™"æ”¹ä¸º"æƒé™æ”¶å›"
                    if (titleElement.textContent.includes('æ”¶å›æƒé™')) {
                        titleElement.textContent = titleElement.textContent.replace('æ”¶å›æƒé™', 'æƒé™æ”¶å›');
                    }
                    
                    // é’ˆå¯¹æƒé™æ”¶å›æ“ä½œï¼Œç§»é™¤æ“ä½œäºº
                    if (titleElement.textContent.includes('æƒé™æ”¶å›')) {
                        const operatorElement = item.querySelector('.activity-user');
                        if (operatorElement) {
                            operatorElement.style.display = 'none';
                        }
                    }
                }
            });
            
            // ç¡®ä¿å›¾è¡¨æ­£ç¡®åˆå§‹åŒ–
            initCharts();
        });

        // ç¡®ä¿å›¾è¡¨åˆå§‹åŒ–å‡½æ•°æ­£ç¡®å®šä¹‰
        function initCharts() {
            // å²—ä½åˆ†å¸ƒå›¾è¡¨
            const positionChart = echarts.init(document.getElementById('position-chart'));
            positionChart.setOption({
                title: {
                    text: 'å²—ä½åˆ†å¸ƒ',
                    left: 'center'
                },
                tooltip: {
                    trigger: 'item'
                },
                legend: {
                    orient: 'vertical',
                    left: 'left'
                },
                series: [
                    {
                        name: 'å²—ä½åˆ†å¸ƒ',
                        type: 'pie',
                        radius: '50%',
                        data: [
                            { value: 48, name: 'å¼€å‘' },
                            { value: 32, name: 'è®¾è®¡' },
                            { value: 20, name: 'äº§å“' },
                            { value: 15, name: 'æµ‹è¯•' },
                            { value: 10, name: 'è¿è¥' }
                        ],
                        emphasis: {
                            itemStyle: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    }
                ]
            });
            
            // éƒ¨é—¨åˆ†å¸ƒå›¾è¡¨
            const departmentChart = echarts.init(document.getElementById('department-chart'));
            departmentChart.setOption({
                title: {
                    text: 'éƒ¨é—¨åˆ†å¸ƒ',
                    left: 'center'
                },
                tooltip: {
                    trigger: 'item'
                },
                legend: {
                    orient: 'vertical',
                    left: 'left'
                },
                series: [
                    {
                        name: 'éƒ¨é—¨åˆ†å¸ƒ',
                        type: 'pie',
                        radius: '50%',
                        data: [
                            { value: 60, name: 'æŠ€æœ¯éƒ¨' },
                            { value: 40, name: 'äº§å“éƒ¨' },
                            { value: 30, name: 'è®¾è®¡éƒ¨' },
                            { value: 20, name: 'å¸‚åœºéƒ¨' },
                            { value: 10, name: 'è¡Œæ”¿éƒ¨' }
                        ],
                        emphasis: {
                            itemStyle: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    }
                ]
            });
        }

        // åˆå§‹åŒ–éƒ¨é—¨åˆ†å¸ƒEChartså®ä¾‹
        var deptChartDom = document.getElementById('userDistributionChart');
        var deptChart = echarts.init(deptChartDom);

        // éƒ¨é—¨åˆ†å¸ƒé…ç½®é¡¹å’Œæ•°æ®
        var deptOption = {
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b}: {c} ({d}%)'
            },
            legend: {
                orient: 'horizontal',
                bottom: 0,
                data: ['æŠ€æœ¯éƒ¨', 'å¸‚åœºéƒ¨', 'äº§å“éƒ¨', 'å…¶ä»–éƒ¨é—¨']
            },
            series: [
                {
                    name: 'éƒ¨é—¨åˆ†å¸ƒ',
                    type: 'pie',
                    radius: ['45%', '70%'],
                    avoidLabelOverlap: false,
                    itemStyle: {
                        borderRadius: 10,
                        borderColor: '#fff',
                        borderWidth: 2
                    },
                    label: {
                        show: false,
                        position: 'center'
                    },
                    emphasis: {
                        label: {
                            show: true,
                            fontSize: '18',
                            fontWeight: 'bold'
                        }
                    },
                    labelLine: {
                        show: false
                    },
                    data: [
                        {value: 148, name: 'æŠ€æœ¯éƒ¨', itemStyle: {color: '#1890ff'}},
                        {value: 82, name: 'å¸‚åœºéƒ¨', itemStyle: {color: '#faad14'}},
                        {value: 66, name: 'äº§å“éƒ¨', itemStyle: {color: '#722ed1'}},
                        {value: 32, name: 'å…¶ä»–éƒ¨é—¨', itemStyle: {color: '#bfbfbf'}}
                    ]
                }
            ]
        };

        // ä½¿ç”¨é…ç½®é¡¹æ˜¾ç¤ºéƒ¨é—¨åˆ†å¸ƒå›¾è¡¨
        deptChart.setOption(deptOption);

        // åˆå§‹åŒ–å²—ä½åˆ†å¸ƒEChartså®ä¾‹
        var jobChartDom = document.getElementById('jobDistributionChart');
        var jobChart = echarts.init(jobChartDom);

        // å²—ä½åˆ†å¸ƒé…ç½®é¡¹å’Œæ•°æ®
        var jobOption = {
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b}: {c} ({d}%)'
            },
            legend: {
                orient: 'horizontal',
                bottom: 0,
                data: ['å¼€å‘å·¥ç¨‹å¸ˆ', 'äº§å“ç»ç†', 'è®¾è®¡å¸ˆ', 'å¸‚åœºè¥é”€', 'å…¶ä»–å²—ä½']
            },
            series: [
                {
                    name: 'å²—ä½åˆ†å¸ƒ',
                    type: 'pie',
                    radius: ['45%', '70%'],
                    avoidLabelOverlap: false,
                    itemStyle: {
                        borderRadius: 10,
                        borderColor: '#fff',
                        borderWidth: 2
                    },
                    label: {
                        show: false,
                        position: 'center'
                    },
                    emphasis: {
                        label: {
                            show: true,
                            fontSize: '18',
                            fontWeight: 'bold'
                        }
                    },
                    labelLine: {
                        show: false
                    },
                    data: [
                        {value: 120, name: 'å¼€å‘å·¥ç¨‹å¸ˆ', itemStyle: {color: '#52c41a'}},
                        {value: 56, name: 'äº§å“ç»ç†', itemStyle: {color: '#13c2c2'}},
                        {value: 42, name: 'è®¾è®¡å¸ˆ', itemStyle: {color: '#eb2f96'}},
                        {value: 68, name: 'å¸‚åœºè¥é”€', itemStyle: {color: '#faad14'}},
                        {value: 42, name: 'å…¶ä»–å²—ä½', itemStyle: {color: '#d9d9d9'}}
                    ]
                }
            ]
        };

        // ä½¿ç”¨é…ç½®é¡¹æ˜¾ç¤ºå²—ä½åˆ†å¸ƒå›¾è¡¨
        jobChart.setOption(jobOption);

        // çª—å£å¤§å°å˜åŒ–æ—¶è°ƒæ•´å›¾è¡¨å¤§å°
        window.addEventListener('resize', function () {
            deptChart.resize();
            jobChart.resize();
        });

        // ç”¨æˆ·èœå•ç›¸å…³åŠŸèƒ½
        function toggleUserMenu() {
            const menu = document.getElementById('userMenu');
            if (menu.style.display === 'block') {
                menu.style.display = 'none';
            } else {
                menu.style.display = 'block';
            }
        }

        // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­èœå•
        document.addEventListener('click', function (event) {
            const userInfo = document.querySelector('.user-info');
            const userMenu = document.getElementById('userMenu');

            if (!userInfo.contains(event.target) && userMenu.style.display === 'block') {
                userMenu.style.display = 'none';
            }
        }, true);

        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                window.location.href = 'login.html';
            }
        }

        // ç¡®ä¿åœ¨DOMå®Œå…¨åŠ è½½åæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            // è·å–æ¨¡æ€æ¡†å’Œç›¸å…³å…ƒç´ 
            const activityModal = document.getElementById('activity-detail-modal');
            
            // ç¡®ä¿æ¨¡æ€æ¡†å­˜åœ¨
            if (!activityModal) {
                console.error('æ´»åŠ¨è¯¦æƒ…æ¨¡æ€æ¡†ä¸å­˜åœ¨');
                return;
            }
            
            const detailButtons = document.querySelectorAll('.activity-detail .view-detail-btn');
            const closeBtn = activityModal.querySelector('.close-btn');
            const cancelBtn = activityModal.querySelector('.modal-btn.cancel-btn');
            
            console.log('æ‰¾åˆ°æŸ¥çœ‹è¯¦æƒ…æŒ‰é’®æ•°é‡:', detailButtons.length); // è°ƒè¯•ä¿¡æ¯
            
            // ä¸ºæ‰€æœ‰æŸ¥çœ‹è¯¦æƒ…æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶
            detailButtons.forEach(button => {
                button.addEventListener('click', function(event) {
                    event.preventDefault(); // é˜²æ­¢æŒ‰é’®é»˜è®¤è¡Œä¸º
                    
                    // è·å–æ´»åŠ¨ç±»å‹
                    const activityItem = this.closest('.activity-item');
                    
                    if (!activityItem) {
                        console.error('æ— æ³•æ‰¾åˆ°çˆ¶çº§æ´»åŠ¨é¡¹å…ƒç´ ');
                        return;
                    }
                    
                    const activityIcon = activityItem.querySelector('.activity-icon');
                    const activityTitle = activityItem.querySelector('.activity-title');
                    
                    if (!activityIcon || !activityTitle) {
                        console.error('æ´»åŠ¨å›¾æ ‡æˆ–æ ‡é¢˜ä¸å­˜åœ¨');
                        return;
                    }
                    
                    console.log('ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…:', activityTitle.textContent); // è°ƒè¯•ä¿¡æ¯
                    
                    // æ ¹æ®ç±»å‹è®¾ç½®ä¸åŒçš„æ¨¡æ€æ¡†å†…å®¹
                    updateActivityModalContent(activityIcon.className, activityTitle.textContent);
                    
                    // æ˜¾ç¤ºæ¨¡æ€æ¡†
                    activityModal.style.display = 'flex';
                });
            });
            
            // æ ¹æ®æ´»åŠ¨ç±»å‹æ›´æ–°æ¨¡æ€æ¡†å†…å®¹
            function updateActivityModalContent(iconClass, title) {
                console.log('æ›´æ–°æ¨¡æ€æ¡†å†…å®¹:', iconClass, title); // è°ƒè¯•ä¿¡æ¯
                
                // è®¾ç½®æ¨¡æ€æ¡†æ ‡é¢˜
                const modalTitle = activityModal.querySelector('.modal-header h3');
                if (modalTitle) {
                    modalTitle.textContent = title.includes('-') ? 
                        title.split('-')[0].trim() + 'è¯¦æƒ…' : 'æ“ä½œè¯¦æƒ…';
                }
                
                // è·å–ç”³è¯·äººåç§°
                let userName = '';
                if (title.includes('-')) {
                    userName = title.split('-')[1].trim();
                } else if (title.includes('çš„')) {
                    userName = title.split('çš„')[0].trim();
                }
                
                // æ ¹æ®ç”¨æˆ·åè®¾ç½®ç›¸å…³ä¿¡æ¯
                let jobId = 'ZH001';
                let department = 'æŠ€æœ¯éƒ¨';
                let position = 'é«˜çº§å¼€å‘å·¥ç¨‹å¸ˆ';
                let email = 'zhangsan@example.com';
                let duration = '30å¤©';
                
                // ä¸ç³»ç»Ÿæ—¥å¿—é¡µé¢å’Œæƒé™å®¡æ‰¹é¡µé¢ä¿æŒä¸€è‡´çš„ç”¨æˆ·ä¿¡æ¯
                if (userName.includes('æå››')) {
                    jobId = 'ZH002';
                    department = 'å¸‚åœºéƒ¨';
                    position = 'å¸‚åœºä¸“å‘˜';
                    email = 'lisi@example.com';
                    duration = '7å¤©';
                } else if (userName.includes('ç‹äº”')) {
                    jobId = 'ZH003';
                    department = 'äº§å“éƒ¨';
                    position = 'äº§å“ç»ç†';
                    email = 'wangwu@example.com';
                    duration = '90å¤©';
                } else if (userName.includes('èµµå…­')) {
                    jobId = 'ZH004';
                    department = 'äººåŠ›èµ„æº';
                    position = 'HRä¸“å‘˜';
                    email = 'zhaoliu@example.com';
                    duration = '1å¹´';
                } else if (userName.includes('é’±ä¸ƒ') || userName.includes('å­™ä¸ƒ')) {
                    jobId = 'ZH005';
                    department = 'æŠ€æœ¯éƒ¨';
                    position = 'å¼€å‘å·¥ç¨‹å¸ˆ';
                    email = 'qianqi@example.com';
                    duration = 'é•¿æœŸ';
                }
                
                // æ›´æ–°ç”¨æˆ·ç›¸å…³ä¿¡æ¯
                const detailItems = activityModal.querySelectorAll('.detail-item');
                detailItems.forEach(item => {
                    const label = item.querySelector('.detail-label');
                    const value = item.querySelector('.detail-value');
                    
                    if (label && value) {
                        if (label.textContent === 'ç”³è¯·äºº') {
                            value.textContent = userName;
                        } else if (label.textContent === 'å·¥å·') {
                            value.textContent = jobId;
                        } else if (label.textContent === 'æ‰€å±éƒ¨é—¨') {
                            value.textContent = department;
                        } else if (label.textContent === 'å²—ä½åç§°') {
                            value.textContent = position;
                        } else if (label.textContent === 'é‚®ç®±') {
                            value.textContent = email;
                        } else if (label.textContent === 'ç”³è¯·æ—¶é•¿') {
                            value.textContent = duration;
                        }
                    }
                });
                
                // è·å–å¤‡æ³¨éƒ¨åˆ†å…ƒç´ 
                const remarkSection = activityModal.querySelector('.detail-section:nth-of-type(4)');
                if (!remarkSection) {
                    console.error('æ— æ³•æ‰¾åˆ°å¤‡æ³¨éƒ¨åˆ†');
                    return;
                }
                
                const remarkContent = remarkSection.querySelector('.detail-remarks');
                
                // è·å–ç”³è¯·åŸå› éƒ¨åˆ†å…ƒç´ 
                const reasonSection = activityModal.querySelector('.detail-section:nth-of-type(3)');
                
                // æ ¹æ®å›¾æ ‡ç±»ååˆ¤æ–­æ´»åŠ¨ç±»å‹
                if (iconClass.includes('approved')) {
                    // å®¡æ‰¹é€šè¿‡
                    remarkSection.querySelector('h4').textContent = 'å®¡æ‰¹å¤‡æ³¨';
                    remarkContent.textContent = 'å·²æ ¸å®ç”¨æˆ·èº«ä»½å’Œéœ€æ±‚ï¼Œç¬¦åˆå…¬å¸å®‰å…¨æ”¿ç­–è¦æ±‚ï¼Œäºˆä»¥æ‰¹å‡†ã€‚æƒé™æœ‰æ•ˆæœŸ' + duration + 'ï¼Œåˆ°æœŸåè‡ªåŠ¨æ”¶å›ã€‚';
                    remarkContent.style.borderLeftColor = '#52c41a'; // ç»¿è‰²
                    remarkContent.style.backgroundColor = '#f6ffed';
                    reasonSection.style.display = 'block'; // æ˜¾ç¤ºç”³è¯·åŸå› 
                } 
                else if (iconClass.includes('rejected')) {
                    // å®¡æ‰¹æ‹’ç»
                    remarkSection.querySelector('h4').textContent = 'æ‹’ç»ç†ç”±';
                    remarkContent.textContent = 'ç”³è¯·ç”¨é€”ä¸ç”¨æˆ·å²—ä½èŒè´£ä¸ç¬¦ï¼Œæ— æ³•ç¡®è®¤ä¸šåŠ¡éœ€æ±‚çš„çœŸå®æ€§ã€‚å»ºè®®ç”±éƒ¨é—¨ä¸»ç®¡é‡æ–°æäº¤ç”³è¯·å¹¶è¯¦ç»†è¯´æ˜ä¸šåŠ¡éœ€æ±‚ã€‚';
                    remarkContent.style.borderLeftColor = '#f5222d'; // çº¢è‰²
                    remarkContent.style.backgroundColor = '#fff1f0';
                    reasonSection.style.display = 'block'; // æ˜¾ç¤ºç”³è¯·åŸå› 
                }
                else if (iconClass.includes('login')) {
                    // ç™»å½•æ“ä½œ
                    remarkSection.querySelector('h4').textContent = 'ç™»å½•ä¿¡æ¯';
                    remarkContent.textContent = 'ç™»å½•æˆåŠŸã€‚è®¾å¤‡ä¿¡æ¯ï¼šWindows 10ï¼ŒChrome æµè§ˆå™¨ã€‚ç™»å½•ä½ç½®ï¼šå…¬å¸å†…ç½‘ï¼ŒIPåœ°å€åŒ¹é…å¸¸ç”¨ä½ç½®ã€‚';
                    remarkContent.style.borderLeftColor = '#1890ff'; // è“è‰²
                    remarkContent.style.backgroundColor = '#e6f7ff';
                    reasonSection.style.display = 'none'; // éšè—ç”³è¯·åŸå› 
                }
                else if (iconClass.includes('new')) {
                    // æ–°ç”³è¯·
                    remarkSection.querySelector('h4').textContent = 'ç”³è¯·çŠ¶æ€';
                    remarkContent.textContent = 'ç”³è¯·å·²æäº¤ï¼Œç­‰å¾…ç®¡ç†å‘˜å®¡æ‰¹ã€‚é¢„è®¡å¤„ç†æ—¶é—´ï¼š24å°æ—¶å†…ã€‚';
                    remarkContent.style.borderLeftColor = '#faad14'; // é»„è‰²
                    remarkContent.style.backgroundColor = '#fffbe6';
                    reasonSection.style.display = 'block'; // æ˜¾ç¤ºç”³è¯·åŸå› 
                }
                else if (iconClass.includes('revoked')) {
                    // æ”¶å›æƒé™
                    remarkSection.querySelector('h4').textContent = 'æ“ä½œå¤‡æ³¨';
                    remarkContent.textContent = 'æ ¹æ®å…¬å¸æƒé™ç®¡ç†è§„å®šï¼Œç”¨æˆ·30å¤©æœªä½¿ç”¨è¯¥æƒé™ï¼Œç³»ç»Ÿè‡ªåŠ¨æ”¶å›ã€‚ç”¨æˆ·å¯é‡æ–°ç”³è¯·ã€‚';
                    remarkContent.style.borderLeftColor = '#bfbfbf'; // ç°è‰²
                    remarkContent.style.backgroundColor = '#fafafa';
                    reasonSection.style.display = 'none'; // éšè—ç”³è¯·åŸå› 
                }
                
                // è°ƒæ•´ç”³è¯·ä¿¡æ¯éƒ¨åˆ†çš„æ˜¾ç¤ºä¸éšè—
                const appInfoSection = activityModal.querySelector('.detail-section:nth-of-type(2)');
                if (iconClass.includes('login')) {
                    // ç™»å½•æ“ä½œä¸æ˜¾ç¤ºç”³è¯·ä¿¡æ¯ï¼Œè€Œæ˜¯æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯
                    appInfoSection.querySelector('h4').textContent = 'ç”¨æˆ·ä¿¡æ¯';
                    appInfoSection.querySelectorAll('.detail-item').forEach((item, index) => {
                        const label = item.querySelector('.detail-label');
                        const value = item.querySelector('.detail-value');
                        
                        switch(index) {
                            case 0:
                                label.textContent = 'ç”¨æˆ·å';
                                value.textContent = 'æå››';
                                break;
                            case 1:
                                label.textContent = 'æ‰€å±éƒ¨é—¨';
                                value.textContent = 'å¸‚åœºéƒ¨';
                                break;
                            case 2:
                                label.textContent = 'ç”¨æˆ·è§’è‰²';
                                value.textContent = 'æ™®é€šç”¨æˆ·';
                                break;
                            case 3:
                                label.textContent = 'ç™»å½•æ—¶é—´';
                                value.textContent = '2023-10-26 14:30:22';
                                break;
                        }
                    });
                } else {
                    // å…¶ä»–æ“ä½œæ˜¾ç¤ºç”³è¯·ä¿¡æ¯
                    appInfoSection.querySelector('h4').textContent = 'ç”³è¯·ä¿¡æ¯';
                    
                    // æ ¹æ®æ ‡é¢˜è·å–ç”¨æˆ·å
                    let userName = 'å¼ ä¸‰'; // é»˜è®¤
                    if (title.includes('-')) {
                        userName = title.split('-')[1].trim().split('çš„')[0];
                    }
                    
                    appInfoSection.querySelectorAll('.detail-item').forEach((item, index) => {
                        const label = item.querySelector('.detail-label');
                        const value = item.querySelector('.detail-value');
                        
                        switch(index) {
                            case 0:
                                label.textContent = 'ç”³è¯·äºº';
                                value.textContent = userName;
                                break;
                            case 1:
                                label.textContent = 'æ‰€å±éƒ¨é—¨';
                                value.textContent = userName === 'å¼ ä¸‰' ? 'æŠ€æœ¯éƒ¨' : 
                                                    userName === 'ç‹äº”' ? 'è´¢åŠ¡éƒ¨' : 
                                                    userName === 'èµµå…­' ? 'äº§å“éƒ¨' : 'å¸‚åœºéƒ¨';
                                break;
                            case 2:
                                label.textContent = 'å·¥å·';
                                value.textContent = 'ZH001';
                                break;
                            case 3:
                                label.textContent = 'å²—ä½åç§°';
                                value.textContent = 'é«˜çº§å¼€å‘å·¥ç¨‹å¸ˆ';
                                break;
                            case 4:
                                label.textContent = 'é‚®ç®±';
                                value.textContent = 'zhangsan@example.com';
                                break;
                            case 5:
                                label.textContent = 'ç”³è¯·æƒé™';
                                value.textContent = 'ä¸­æµ·é€šç™»å½•æƒé™';
                                break;
                            case 6:
                                label.textContent = 'ç”³è¯·æ—¶é—´';
                                value.textContent = '2023-10-26 10:20:35';
                                break;
                            case 7:
                                label.textContent = 'ç”³è¯·æ—¶é•¿';
                                value.textContent = '30å¤©';
                                break;
                        }
                    });
                }
            }
            
            // å…³é—­æ¨¡æ€æ¡†çš„äº‹ä»¶å¤„ç†
            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    activityModal.style.display = 'none';
                });
            }
            
            if (cancelBtn) {
                cancelBtn.addEventListener('click', () => {
                    activityModal.style.display = 'none';
                });
            }
            
            window.addEventListener('click', (event) => {
                if (event.target === activityModal) {
                    activityModal.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html> 